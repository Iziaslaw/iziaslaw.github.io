<!DOCTYPE html>
<html>
  <head>
    <title>izi pers</title>
<!--
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
-->      
    <script type="text/javascript" src="lib/p5.min.js"></script>
    <script type="text/javascript" src="lib/p5.dom.min.js"></script>
    <script type="text/javascript" src="lib/p5.sound.min.js"></script>
<!--    <script type="text/javascript" src="bib/jquery-3.1.1.js"></script>-->

    <!--    <script type="text/javascript" src="js/main.js"></script>-->
<style>
  body {
    padding: 0; margin: 0;
    font-size: 16px;
  }
  canvas {
    vertical-align: top;
  }
  html {
    font-family: monospace;
    color: #1aaa52;
    
/*    font-size: 10px;*/
  }
  div {
    display: block;
  }
</style>

  </head>
  <body>
    <script>

        function Skin() {
        this.display = function() {  
        
          if(moving){for(var i = 1;i < imageArr[imageNum].image.length; i++) {
          push();
        translate(imageArr[imageNum].image[0][0],imageArr[imageNum].image[0][1]);
        beginShape();    
        rotate(sly.value());
        scale(sly2.value(),sly3.value());    
        stroke('rgba('+imageArr[imageNum].color[0][0]+','+ imageArr[imageNum].color[0][1]+','+ imageArr[imageNum].color[0][2]+','+imageArr[imageNum].color[0][3]+')');            
        let c = color('rgba('+imageArr[imageNum].color[i][0]+','+ imageArr[imageNum].color[i][1]+','+ imageArr[imageNum].color[i][2]+','+imageArr[imageNum].color[i][3]+')');// ,colorAll[i][3]);//cr, cg, cb, ca);//colorAll[i][0]','colorAll[i][1]','colorAll[i][2]','colorAll[i][3]); 
            
        fill(c);
          for(var j = 0;j<imageArr[imageNum].image[i].length; j+=2) {
  vertex(imageArr[imageNum].image[i][j] + points[i][j],imageArr[imageNum].image[i][j+1] + points[i][j+1]);
            
          }
endShape(CLOSE);
        pop();
          }}
          else 
            {for(var i = 1;i < imageArr[imageNum].image.length; i++) {
          push();
        translate(imageArr[imageNum].image[0][0],imageArr[imageNum].image[0][1]);
        beginShape();    
        rotate(sly.value());
        scale(sly2.value(),sly3.value());    
        stroke('rgba('+imageArr[imageNum].color[0][0]+','+ imageArr[imageNum].color[0][1]+','+ imageArr[imageNum].color[0][2]+','+imageArr[imageNum].color[0][3]+')');            
        let c = color('rgba('+imageArr[imageNum].color[i][0]+','+ imageArr[imageNum].color[i][1]+','+ imageArr[imageNum].color[i][2]+','+imageArr[imageNum].color[i][3]+')');// ,colorAll[i][3]);//cr, cg, cb, ca);//colorAll[i][0]','colorAll[i][1]','colorAll[i][2]','colorAll[i][3]); 
            
        fill(c);
          for(var j = 0;j<imageArr[imageNum].image[i].length; j+=2) {
  vertex(imageArr[imageNum].image[i][j],imageArr[imageNum].image[i][j+1] );
            
          }
endShape(CLOSE);
        pop();
          }}
        }
        }
      
      let bx1=0,by1=0,bx2=400,by2=400;
        let bx1B = true;
      let button, button2,button3,button4;
      let points = [[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]];
      let moving = false;
      let pointsMove = [[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]];
      let colorAll = [[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]];
      
      let imageArr = [];
imageArr[0] = { name:"logo", image: [[563,393],[-401,-231,-372,-232,-377,-223,-377,-209,-379,-158,-378,-112,-378,-97,-376,-93,-384,-92,-401,-94,-406,-94,-398,-108,-399,-183],[-349,-231,-303,-233,-248,-231,-251,-213,-336,-113,-252,-112,-247,-105,-247,-89,-309,-96,-359,-91,-359,-109,-313,-170,-276,-213,-351,-213,-355,-224],[-232,-231,-207,-233,-204,-230,-208,-196,-208,-142,-210,-100,-207,-91,-225,-91,-232,-92,-227,-109,-225,-155,-228,-218],[-192,-97,-176,-136,-154,-201,-140,-232,-129,-232,-122,-232,-98,-178,-74,-114,-66,-95,-72,-93,-88,-95,-100,-131,-111,-160,-124,-192,-131,-209,-146,-166,-151,-154,-106,-153,-100,-135,-141,-136,-158,-133,-168,-107,-171,-92,-189,-92],[-56,-141,-41,-143,-31,-117,-10,-110,15,-110,28,-118,36,-136,20,-149,-17,-156,-44,-171,-52,-195,-47,-217,-29,-229,-2,-231,22,-227,36,-217,44,-204,48,-200,49,-191,36,-190,28,-194,19,-207,0,-211,-15,-212,-27,-206,-33,-194,-23,-182,0,-173,18,-168,29,-165,48,-149,54,-130,44,-109,34,-96,-4,-89,-39,-100,-56,-116,-60,-137],[75,-230,96,-230,93,-192,93,-154,93,-119,94,-112,143,-114,161,-115,162,-98,160,-94,143,-94,103,-98,77,-94,73,-92,76,-129,70,-180,72,-224],[166,-95,190,-156,209,-205,220,-234,231,-234,240,-230,247,-204,261,-173,277,-132,292,-102,294,-92,279,-92,270,-99,260,-127,251,-157,242,-180,230,-205,226,-203,218,-175,209,-154,252,-153,258,-135,214,-137,201,-134,190,-102,185,-92],[289,-230,297,-190,314,-127,324,-95,329,-92,343,-93,351,-118,364,-161,374,-199,377,-207,389,-170,395,-144,402,-115,409,-93,425,-94,434,-116,450,-163,456,-186,462,-220,467,-229,445,-232,441,-202,432,-161,424,-143,419,-121,409,-171,401,-192,395,-219,388,-231,365,-232,353,-196,347,-158,337,-133,333,-120,321,-184,313,-214,307,-231],[-113,175,-120,185,-131,191,-145,191,-159,185,-166,175,-169,162,-169,143,-161,130,-151,119,-140,119,-127,123,-116,132,-116,146,-130,146,-142,148,-154,146,-165,147,-170,148,-170,160,-158,162,-127,162,-109,162,-97,162,-95,148,-104,124,-116,111,-134,106,-151,105,-168,112,-181,129,-188,148,-186,174,-177,190,-166,203,-144,210,-112,202,-101,187,-95,178],[123,108,138,101,142,108,144,115,159,105,175,104,193,108,204,121,205,142,205,170,208,196,208,205,202,208,188,208,187,196,186,167,186,142,183,124,166,121,153,123,143,137,142,156,144,175,143,192,143,208,140,213,125,210,122,189,122,147],[233,83,250,69,251,97,250,106,261,106,272,107,269,115,266,119,254,119,253,125,252,155,251,185,254,192,261,191,268,190,271,191,272,199,272,207,259,210,243,207,235,201,228,184,234,129,229,123,216,123,215,113,225,108,232,108],[-369,68,-355,70,-314,71,-295,71,-276,81,-268,101,-265,119,-273,134,-279,142,-296,149,-315,154,-335,153,-350,151,-350,142,-349,134,-333,134,-310,135,-296,129,-285,116,-283,104,-292,91,-314,89,-340,90,-350,90,-350,116,-352,138,-350,153,-352,176,-349,197,-351,207,-361,208,-373,204,-372,183,-368,135],[-13,134,-4,132,-7,120,-25,106,-44,105,-68,112,-79,131,-78,151,-63,158,-35,167,-26,170,-17,179,-20,187,-31,193,-50,191,-59,183,-67,172,-74,172,-87,178,-81,190,-66,204,-51,209,-24,209,-9,196,2,186,-1,166,-11,153,-36,148,-56,143,-61,131,-51,122,-36,122,-21,133,-17,137,-8,135],[-245,106,-234,104,-232,113,-222,110,-207,99,-196,100,-192,109,-193,121,-204,125,-214,123,-226,129,-229,153,-231,177,-232,199,-232,206,-245,207,-249,194,-249,152,-247,117,-245,99],[339,137,351,137,356,134,349,117,330,104,308,104,295,110,282,126,281,145,290,154,311,161,327,166,339,170,345,181,334,188,327,194,315,194,305,190,296,184,291,172,280,174,277,179,279,189,287,202,309,211,324,211,345,201,355,193,362,178,352,158,342,152,321,148,302,140,296,128,304,120,320,119,333,125],[103,180,99,178,86,174,76,189,64,191,56,191,41,184,36,172,31,163,31,154,37,136,43,125,56,119,71,123,80,132,83,142,83,146,71,147,57,146,44,146,36,146,32,147,31,163,47,161,66,161,90,162,102,162,105,162,106,153,102,131,97,122,84,112,69,107,49,107,27,116,17,139,15,167,18,188,38,207,60,211,80,207,95,196,105,179],[],[],[]], color: [[10,10,10,0.5],[193,10,10,0.79],[193,191,239,0.79],[254,126,62,0.79],[129,213,96,0.79],[255,255,72,0.79],[42,116,241,0.79],[144,29,241,0.79],[40,170,135,0.79],[255,137,135,0.79],[255,10,255,0.79],[0,255,255,0.79],[0,255,0,0.79],[196,221,198,0.79],[255,206,0,0.79],[255,148,0,0.79],[23,75,239,0.79],[],[],[]]};
      imageArr[1] = { name:"ship", image: [[462,453],[-169,34,-142,23,-114,34,-81,27,-48,35,-10,31,20,42,69,30,115,42,156,30,213,51,264,30,314,52,329,95,-178,81],[-72,62,35,65,115,64,179,62,202,51,223,36,243,7,275,-28,320,-50,230,-29,175,-28,90,-21,32,-18,-12,-18,-39,-66,-86,-67,-100,-67,-110,-38,-104,18,-115,51,-117,64],[83,-212,79,-23,89,-24,87,-231],[87,-192,136,-190,159,-177,177,-152,185,-120,187,-84,184,-53,167,-39,144,-34,115,-35,89,-35,102,-61,107,-90,108,-120,106,-151],[-108,32,-94,32,-72,31,-53,30,-33,40,2,37,26,31,53,25,88,32,110,39,138,41,161,37,187,39,213,50,263,29,314,48,331,96,-181,83,-172,33,-144,21],[74,-223,97,-224,92,-207,78,-207],[],[],[],[],[],[],[]],
      color: [[10,10,10,0.5],[53,111,255,0.62],[174,129,0,0.96],[51,20,0,0.96],[255,0,0,0.71],[87,174,217,0.71],[111,131,33,0.75],[],[],[],[],[],[],[]]}
      imageArr[2] = { name:"ddd", image: [[451,420],[-119,41,116,16,61,116,-138,149,-192,31,-125,-71,48,-106],[-41,-146,136,148,-103,-123,201,38],[145,64,276,12,319,43,334,87,330,128,289,156,267,185,238,198,190,189,163,182,132,179],[221,-159,180,-178,180,-213,206,-249,248,-256,272,-233,273,-208,262,-183,249,-168,205,-152,188,-153,153,-175,154,-205,165,-258,188,-270,232,-274,271,-270,288,-237,286,-208,270,-174,244,-156,213,-149,195,-148,156,-172],[],[],[],[],[],[],[],[],[]], color: [[10,10,10,0.5],[255,10,10,0.5],[0,255,10,0.67],[0,255,255,0.67],[213,234,0,0.8],[],[],[],[],[],[],[],[],[]]}
imageArr[3] = { "name": "wew", "image": [ [ 299, 496 ], [ -61, 16, 58, 42, -33, 118, -11, 46 ], [], [ 61, 111, -70, 64, 29, -9, -26, 57 ], [], [], [], [], [], [], [], [], [], [] ], "color": [ [ 10, 10, 10, 0.5 ], [ 234, 10, 10, 0.5 ], [], [ 234, 255, 10, 0.5 ], [], [], [], [], [], [], [], [], [], [] ] } 
imageArr[4] = { name:"fff", image: [[361,581],[-40,15,94,-59,42,50,-86,-69,38,-77,5,112,-216,78,143,9,-15,-175,-75,191],[-134,14,130,158,94,167,81,91,-108,-14,-92,18],[-222,195,175,193,168,-198,-191,-180,-247,-48,-275,-54,-206,-191,182,-210,188,200,-238,211],[],[],[],[],[],[],[],[],[],[]], color: [[10,10,10,0.5],[255,10,10,0.5],[0,255,10,0.5],[0,105,250,0.5],[],[],[],[],[],[],[],[],[],[]]};
      imageArr[5] = { name:"", image: [[335,466],[-48,46,51,-130,175,158,-148,68,-77,-122,4,205,328,-64,-117,73,-141,189,236,-189],[-153,196,-69,-112,95,12,-26,71,164,-182,287,4,-37,-234,-135,232,1,238,-109,-217],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]], color: [[10,10,10,0.5],[255,10,10,0.5],[0,255,0,0.5],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]]}
      
      let skins =false;let skin;
      let drawing = true;
      let imageNum = 0;
      let image;
      let sly,sly2,sly3,sly4;
      
      function setup() {
        createCanvas(innerWidth, innerHeight*0.9);
        image = new Skin(); 
        frameRate(6);
        
        button4 = createButton('BackImage');
        button4.mousePressed(BackDrawing);
        button2 = createButton('NextImage');
        button2.mousePressed(NextDrawing);   
        button3 = createButton('Move');
        button3.mousePressed(PointsMove);
        sly = createSlider(-3.15,3.15,0,0.01);//Angle
        sly2 = createSlider(-1,10,1,0.1);//X
        sly3 = createSlider(-1,10,1,0.1);//Y
        sly4 = createSlider(0,1,0.5,0.01);
        
        
      }
      
      function draw() {
        background(130);
//кирпичная стена rgb(170, 60, 46);
            push();
        stroke(150);
        fill(170, 60, 46);
        for(let i=0;i< innerHeight/34;i++){
          for(let j = 0; j< innerWidth/60;j++){
            if(i % 2 === 0) rect(-10+j*64,0+i*34,60,30);
            else rect(-10+j*64 -32,0+i*34,60,30);
          }
        }
            pop();
        
        text('<'+imageArr[imageNum].name+'>',10,height - 20);
        text('Поворот(рад): '+ sly.value(),220,height - 20);       
        text('Масштаб(X): '+ sly2.value(),350,height - 20);       
        text('Масштаб(Y): '+ sly3.value(),500,height - 20);        
                              
        image.display();      
      
if(moving) {
  for(var i = 1;i < imageArr[imageNum].image.length; i++) {
                
          for(var j = 0;j<imageArr[imageNum].image[i].length; j++) {
            //pointsMove[i][j].push('9');//round(random(-6,6)));
            points[i][j] += pointsMove[i][j];
            
          }
          }}
      }
      function NextDrawing() {
        moving = false;
        
        if(imageNum >= imageArr.length-1) imageNum = 0;
        else imageNum += 1;
      }
      function BackDrawing() {
        moving = false;
        
        if(imageNum <= 0) imageNum = imageArr.length-1;
        else imageNum -= 1;
      }
      function PointsMove() {
        pointsMove = [[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]];
        points = [[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]];
        
        for(var i = 1;i < imageArr[imageNum].image.length; i++) {
                
          for(var j = 0;j<imageArr[imageNum].image[i].length; j++) {
            //pointsMove[i][j].push('9');//round(random(-6,6)));
            pointsMove[i].push(round(random(-5,5)));
            points[i].push(0);
          }
          }
        
        
        if(!moving) moving = true;
        else moving = false;
//        if(points[1].length < 2) {points = pointsMove;}
//        else {points.length = 0;}
      }
      
     
      </script>
    
  </body>

</html>